<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üí® BPFAM ‚Äî Weed</title>
<style>
  :root { --bg:#0b0b0c; --card:#151517; --text:#e8fdf8; --muted:#98fff0; --neon:#00ffcc; }
  * { box-sizing:border-box; }
  body{ margin:0; background:#000; color:var(--text); font-family:system-ui, Arial, sans-serif; }
  header{
    position:sticky; top:0; z-index:10; background:#000; border-bottom:1px solid rgba(0,255,204,.15);
    display:flex; align-items:center; gap:10px; padding:12px 14px;
  }
  .back{
    text-decoration:none; padding:.5rem .9rem; border:1px solid var(--neon); border-radius:999px;
    color:var(--neon); box-shadow:0 0 12px rgba(0,255,204,.5);
  }
  h1{ margin:0; font-size:1rem; text-shadow:0 0 12px var(--neon); }

  .wrap{ max-width:720px; margin:0 auto; padding:18px 12px 40px; }
  .item{
    background:var(--card); border:1px solid rgba(0,255,204,.12); border-radius:16px;
    box-shadow:0 0 30px rgba(0,255,204,.08); margin:18px 0; padding:14px;
  }
  .title{
    font-weight:600; font-size:1rem; margin:0 0 10px;
  }
  .meta{
    font-size:.8rem; color:var(--muted); opacity:.85; margin:-4px 0 10px;
  }
  video{
    display:block; width:100%; height:auto; border-radius:12px;
    background:#000; /* effetto ‚Äúletterbox‚Äù pulito */
    box-shadow:0 0 20px rgba(0,255,204,.18);
  }
  footer{ text-align:center; color:#7fffe9; opacity:.8; padding:28px 12px; }
</style>
</head>
<body>
  <header>
    <a class="back" href="/Video-bpfam/">‚¨ÖÔ∏è Torna indietro</a>
    <h1>üí® BPFAM ‚Äî Weed Video üíé</h1>
  </header>

  <main id="list" class="wrap"></main>

  <footer>üíé BPFAM ‚Äî Seriet√†, Qualit√† e Rispetto</footer>

<script>
(async () => {
  const owner = "bpfam";
  const repo  = "Video-bpfam";
  const path  = "videos/weed";
  const api   = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

  function fmtSize(bytes){
    if (!bytes && bytes !== 0) return "";
    const units = ["B","KB","MB","GB"]; let i=0; let n=bytes;
    while(n>=1024 && i<units.length-1){ n/=1024; i++; }
    return `${n.toFixed(n<10 && i>0 ? 1 : 0)} ${units[i]}`;
  }

  try{
    const res = await fetch(api, { headers:{ "Accept":"application/vnd.github+json" }});
    const data = await res.json();
    const files = (Array.isArray(data)?data:[])
      .filter(f => f.type==="file" && /\.mp4$/i.test(f.name))
      // opzionale: ordina dal pi√π recente alfabeticamente
      .sort((a,b)=>a.name.localeCompare(b.name)).reverse();

    const list = document.getElementById("list");
    if(!files.length){
      list.innerHTML = `<p style="color:#7fffe9;text-align:center">Nessun video trovato.</p>`;
      return;
    }

    for(const f of files){
      const encoded = encodeURIComponent(f.name);
      const src = `./${encoded}`;

      const item = document.createElement("section");
      item.className = "item";

      const title = document.createElement("h2");
      title.className = "title";
      title.textContent = f.name;

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = `MP4 ‚Ä¢ ${fmtSize(f.size)}`;

      const v = document.createElement("video");
      v.controls = true;
      v.playsInline = true;
      v.preload = "metadata";
      v.src = src;

      item.appendChild(title);
      item.appendChild(meta);
      item.appendChild(v);
      list.appendChild(item);
    }
  }catch(e){
    console.error(e);
    document.getElementById("list").innerHTML =
      `<p style="color:#7fffe9;text-align:center">Errore nel caricare i file.</p>`;
  }
})();
</script>
</body>
</html>